\environment envCfgThesisDescriptions
\environment envCfgThesisSynonyms

\startenvironment envCfgThesisCommands

%-----------------------------------------
% insertion of reference qoutes

% quote such as a book with author and year parameters, without specific page reference
\define[2]\aQuote{\color[magenta:8]{\tt{\small{(#1, #2)}}}\doRegQuote{#1, #2}}

% quote such as a book with author and year parameters, with specific page reference
\define[3]\aQuoteB{\color[magenta:8]{\tt{\small{(#1, #2, p.#3 )}}}\doRegQuote{#1, #2, #3}}

% website quote, author and year
\define[2]\aQuoteW{\color[magenta:8]{\tt{\small{(#1, #2, web)}}}\doRegQuote{#1, #2, web}}

% website quote, just author
\define[1]\aQuoteWA{\color[magenta:8]{\tt{\small{(#1, web)}}}\doRegQuote{#1, web}}

% source quote, just the year
\define[1]\aQuoteY{\color[magenta:8]{\tt{\small{(#1)}}}}

% personal information quotes, just year
\define[1]\aQuoteP{\color[magenta:8]{\tt{\small{(own Source, #1)}}}\doRegQuote{own source: #1}}

% the quote of authors within the text flow
\define[1]\aQuoteInTextA{\color[magenta:8]{\tt{\small{#1}}}\doRegQuote{author: #1}}

% the quote of a title within the text flow
\define[1]\aQuoteInTextT{\color[magenta:8]{\tt{\small{\quote{#1}}}}\doRegQuote{title: #1}}

\define[1]\doRegQuote{\RegQuote{#1}}

\define\placeQuotesLocal{\placeRegQuote[criterium=section]}
\define\placeQuotesAll{\placeRegQuote[criterium=all]}

%-----------------------------------------
% insertion of keywords and the construction of a corresponding index register

%\define[1]\aKeyword{{\bf\em #1}}


\def\aKeyword{\dosingleempty\doAKeyword}

\def\doAddToIndex#1#2{\RegKeyword{#1}{\color[magenta:8]{\em#2}}}
\def\doAKeyword[#1]#2%
{%
	\iffirstargument
		\doAddToIndex{#2}{#1}
	\else
		\doAddToIndex{#2}{#2}
	\fi
}

\define[2]\aKeywordSee{{\seeRegKeyword{#1}{#2}\color[magenta:8]{\em#1}}}
\define[2]\aKeywordInViSee{\seeRegKeyword{#1}{#2}}
\define[1]\aKeywordInVi{\RegKeyword{#1}}

%-----------------------------------------
% insertion of abbreviations into the text and the construction of a corresponding index of abbreviations

% creates a new abbreviation in the index and displays the full name and the abbreviation in the text as follows: FullName [Abbreviation]
% argument 1 =  full name
% argument 2 = abbreviation
\define[2]\abbrNew{\color[magenta:8]{\em#1}\bracket{#2}\RegAbbreviation{#2}{#1}}

% creates a new abbreviation in the index but does not display them in the text
% argument 1 =  full name
% argument 2 = abbreviation
\define[2]\abbrNewInVi{\RegAbbreviation{#2}{#1}}

% inserts the abbreviation into the text. 
%here we could probably also link to the full abbreviation in the abbreviation index?
\define[1]\abbr{\color[magenta:8]{\em#1}}	

% inserts the full name of the abbreviation. 
\define[1]\abbrFull{\color[magenta:8]{\em\infull{#1}}}

%-----------------------------------------
% insertion of map locations into the text

% creates a new location. can be called with two arguments, the first one is optional. the
% command inserts the location in the text, registers the given location link and
% generates a footnote
%
% argument 1 [optional]	: a synonym for the the location. this synonym can be used
%					  later when referring to the location with \aLocation. if this
%					  argument is not given, locations can only referred to later on
%					  by using the link given in argument two
% argument 2 [mandatory]	: the link to the location, can be a map, a website, whatever 
\def\aNewLocation{\dosingleempty\doANewLocation}
\def\doANewLocation[#1]#2%
{%
	\iffirstargument
		\useURL[#2][#2][][#1]\from[#2]
	\else
		\useURL[#2][#2][][#2]\from[#2]
	\fi
	\footnote[#2]{location: \goto{\url[#2]}[url(#2)]}
}

% links a geographical location to the corresponding text and generates a footnote with the link. the corresponding link must have been created with \aNewLocation already. as rgument one can give the link or the synonym, depending how \aNewLocation was invoked
\define[1]\aLocation{\from[#1]\footnote[#1]{location: \goto{\url[#1]}[url(#1)]}}

% just highlights a location text without creating footnote or links
\define[1]\aLocationE{\inframed[frame=off, background=color, backgroundcolor=blue:4]{\bf#1 }}

\define[1]\locMissingSrc%
{%
	\color[red:8]{\tt{\small{LOC MISSING(#1)}}}
	\RegMissingRef{#1}
}

%-----------------------------------------
% insertion of links and footnotes into text

% just display the link in the text and generate a footnote, hence link must have been registered already
\define[1]\aLink{\from[#1]\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}}

% register a new link, display it in the text and generate a footnote. the text label can be set by the optional first argument. if the first argument is not given, the whole link address gets displayed in the text
% argument one [optional]: text label
% argument  two [mandatory]: link url. if first argument is nor given, the link serves as label as well
\def\aLinkNew{\dosingleempty\doALinkNew}
\def\doALinkNew[#1]#2%
{%
	\iffirstargument
		\useURL[#2][#2][][#1]\from[#2]
	\else
		\useURL[#2][#2][][#2]\from[#2]
	\fi
	\footnote[#2]{website: \goto{\url[#2]}[url(#2)]}
}

% register a new link, display a generic "link" surrounded by brackets in the text and generate a footnote
\define[1]\aLinkNewG%
{%
 	\useURL[#1][#1][][link]\small\bracket{\from[#1]}
	\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}
}

% registers a new link but does not display it in the text. only generates a footnote
\define[1]\aLinkNewF%
{%
 	\useURL[#1][#1][][link]
	\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}
}

% display a generic "link" surrounded by brackets in the text and generate a footnote, thus link must have been registered already
\define[1]\aLinkG{\small\bracket{\from[#1]}\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}}

% just generate a foornote. link ist not displayed in text but only in footnote, hence it must have been registered already!
\define\aLinkF{\dosingleempty\doLinkF}
\def\doLinkF[#1]#2%
{%
	\iffirstargument
		\goto{#1}[url(#2)]
		\footnote[#1]{website: \goto{\url[#2]}[url(#2)]}
	\else
		#1
		\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}
	\fi
}

% register a link url and generate a footnote
\define[1]\aLinkNewF{\useURL[#1][#1][][#1]\footnote[#1]{website: \goto{\url[#1]}[url(#1)]}}

\define[1]\aLinkE{\inframed[frame=off, background=color, backgroundcolor=green:4]{\bf#1 }}


%-----------------------------------------
% generates a dictionary of translated words

\def\toTranslate{\dosingleempty\doTranslate}
\def\doTranslate[#1]#2%
{%
	\iffirstargument
		\RegTranslation{{\ss#2}\bracket{#1}}
		\color[green]{\em#2}\bracket{#1}
	\else
		\RegTranslationUndefined{{\ss#2} <> translation missing}
		\color[green]{\em#2}\bracket{translation missing}
	\fi 
}

\def\toTranslateO{\dosingleempty\doTranslateO}
\def\doTranslateO[#1]#2%
{%
	\iffirstargument
		\RegTranslation{{\ss#2}\bracket{#1}}
		\color[green]{\em\tt#2}
	\else
		\RegTranslationUndefined{{\ss#1} <> translation missing}
		\color[green]{\em\tt#1}
	\fi 
}

\define[]\placeTranslationsLocal{\placeRegTranslation[criterium=section]}
\define[]\placeTranslationsAll{\placeRegTranslation[criterium=all]}

\define[]\placeUndefinedTranslationsLocal{\placeRegTranslationUndefined[criterium=section]}
\define[]\placeUndefinedTranslationsAll{\placeRegTranslationUndefined[criterium=all]}


%-----------------------------------------
% places reminders in text

\def\startAReminder{\dosingleempty\doStartAReminder}
\def\stopAReminder{\stopDoAReminder}

\def\doStartAReminder[#1]%
{%
	\startDoAReminder
	\iffirstargument
		{\tt#1}\RegReminder{#1}
	\else	
		\RegReminder{not further specified}
	\fi
}

\define[]\placeRemindersLocal{\placeRegReminder[criterium=section]}
\define[]\placeRemindersAll{\placeRegReminder[criterium=all]}

%-----------------------------------------
% places marks in text

\define[1]\startARemark%
{%
	\RegRemark{#1}%
	\startDoARemark%
	#1%
}

\define\stopARemark{\stopDoARemark}

\define[]\placeRemarksLocal{\placeRegRemark[criterium=section]}
\define[]\placeRemarksAll{\placeRegRemark[criterium=all]}


\define[1]\toMark%
{%
	\RegTextMark{#1}\startAMark{\bf#1}\stopAMark
}

\define[]\placeTextMarksLocal{\placeRegTextMark[criterium=section]}
\define[]\placeTextMarksAll{\placeRegTextMark[criterium=all]}

%-----------------------------------------

\define\refMissing%
{%
	\color[red:8]{\tt{\small{REF MISSING}}}
	\RegMissingRef{undefined ref missing}
}

\define[1]\refMissingSrc%
{%
	\color[red:8]{\tt{\small{REF MISSING(#1)}}}
	\RegMissingRef{#1}
}

\define[]\placeMissingReferencesLocal{\placeRegMissingRef[criterium=section]}
\define[]\placeMissingReferencesAll{\placeRegMissingRef[criterium=all]}

%-----------------------------------------

\define[1]\toLink{\inframed[frame=off, background=color, backgroundcolor=yellow:2]{\bf#1 }}
\define[1]\isCorrect{\inframed[frame=off, background=color, backgroundcolor=magenta:4]{\bf #1(?) }}

% \define[]\audio
% \define[]\video
% \define[]\media

\define[]\spaceHalf{\blank[0.5cm]}

\define[1]\cited{\quote{\em#1}}
\define[1]\bracket{ [{\ss{\small#1}}]}

%-----------------------------------------
% definition of various text frames

% generates a text frame with black background and green outlines. indicates a definition
\def\textBoxedRoundMaxDef{\dosingleempty\doTextBoxedRoundMaxDef}
\def\doTextBoxedRoundMaxDef[#1]#2%
{%
	\iffirstargument
		\definitionFramed{#2} \blank[#1cm]
	\else
		\definitionFramed{#2}
	\fi 
}

\defineframed[definitionFramed]
[	
	frame=on, 
	corner=0, 
	width=local,
	align={width, verytolerant, nothyphenated},
	frameoffset=1pt,
   	framecolor=green,
	background=color,
   	backgroundcolor=black, 
	backgroundoffset=1pt, 
   	foreground=color,
	foregroundcolor=white,
	rulethickness=3pt,
	framedepth=2pt,
	backgrounddepth=2pt
]

% generates a text frame with black background and green outlines. indicates a definition
\def\textBoxedRoundMaxObj{\dosingleempty\doTextBoxedRoundMaxObj}
\def\doTextBoxedRoundMaxObj[#1]#2%
{%
	\iffirstargument
		\objectiveFramed{#2} \blank[#1cm]
	\else
		\objectiveFramed{#2}
	\fi 
}

\defineframed[objectiveFramed]
[	
	frame=on, 
	corner=0, 
	width=local,
	align={width, verytolerant, nothyphenated},
	frameoffset=1pt,
   	framecolor=yellow,
	background=color,
   	backgroundcolor=black, 
	backgroundoffset=1pt, 
   	foreground=color,
	foregroundcolor=white,
	rulethickness=4pt,
	framedepth=2pt,
	backgrounddepth=2pt
]

% generates a text frame with black background and blue outlines. indicates a question
\def\textBoxedRoundMaxQuestion{\dosingleempty\doTextBoxedRoundMaxQuestion}
\def\doTextBoxedRoundMaxQuestion[#1]#2%
{%
	\iffirstargument
		\questionFramed{#2} \blank[#1cm]
	\else
		\questionFramed{#2}
	\fi 
}

\defineframed[questionFramed]
[
	frame=on, 
	corner=0, 
	width=local,
	align={width, verytolerant, nothyphenated},
	frameoffset=1pt,
   	framecolor=blue:7,
	background=color,
   	backgroundcolor=black, 
	backgroundoffset=1pt, 
   	foreground=color,
	foregroundcolor=white,
	rulethickness=3pt,
	framedepth=2pt,
	backgrounddepth=2pt,
]

% generates a text frame with black background and magenta outlines. indicates something important that is neither a question nor a definition
\def\textBoxedRoundMax{\dosingleempty\doTextBoxedRoundMax}
\def\doTextBoxedRoundMax[#1]#2%
{%
	\iffirstargument
		\textFramed{#2} \blank[#1cm]
	\else
		\textFramed{#2}
	\fi 
}

\defineframed[textFramed]
[
	frame=on, 
	corner=0, 
	width=local,
	align={width, verytolerant, nothyphenated},
	frameoffset=1pt,
   	framecolor=magenta:7,
	background=color,
   	backgroundcolor=black, 
	backgroundoffset=1pt, 
   	foreground=color,
	foregroundcolor=white,
	rulethickness=3pt,
	framedepth=2pt,
	backgrounddepth=2pt,
]

\stopenvironment